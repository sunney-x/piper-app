{"version":3,"sources":["Auth.tsx","utils.ts","img/checkmark.svg","components/Center.tsx","pages/Register.tsx","components/Button.tsx","assets/icons/airplane.svg","components/Chat.tsx","components/Video.tsx","pages/Room.tsx","components/Box.tsx","assets/icons/panel-arrow-right.svg","assets/icons/add.svg","pages/_Home.tsx","pages/_Room.tsx","App.tsx","index.tsx"],"names":["AuthContext","createContext","user","id","name","avatar","signup","useAuth","useContext","ProvideAuth","props","auth","useProvideAuth","Provider","value","children","useState","setUser","username","randomId","Math","random","toString","substr","localStorage","setItem","JSON","stringify","useEffect","getItem","userData","parse","Center","styled","div","Register","style","fontSize","display","width","justifyContent","onChange","e","target","type","placeholder","borderRadius","padding","paddingLeft","outline","border","to","onClick","marginLeft","height","backgroundColor","cursor","src","Checkmark","alt","Button","button","Messages","messages","author","className","map","message","content","Chat","console","log","groupedMessages","array","key","elements","li","i","length","push","groupByProperty","overflowY","gm","top","right","tabIndex","onKeyDown","currentTarget","sendMessage","authorId","title","airplane","Video","emitAction","owner","videoData","ticker","setTicker","videoRef","useRef","emitVideoData","current","video","property","payload","url","time","currentTime","paused","handleTicker","timeDiff","abs","pause","play","then","catch","clearInterval","setInterval","muted","autoPlay","controls","ref","onPause","onPlay","reducer","state","action","filter","item","Room","room","socket","setSocket","React","useReducer","dispatch","emit","_socket","io","process","REACT_APP_API_URL","query","roomId","on","navigator","clipboard","writeText","users","u","bottom","ownerId","msg","LoadRoom","setRoom","axios","get","match","params","resp","success","data","err","response","error","Box","icon","header","description","_Home","history","useHistory","panelArrowRight","add","post","res","_Room","href","preload","App","exact","path","component","loadEnv","defaults","baseURL","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.d53e3e32.chunk.js","sourcesContent":["import {\r\n  useState,\r\n  useEffect,\r\n  useContext,\r\n  createContext,\r\n  ReactNode,\r\n} from \"react\";\r\nimport { User } from \"./types\";\r\nimport { generateId } from \"./utils\";\r\n\r\nconst AuthContext = createContext<{\r\n  user: User;\r\n  signup: (username?: string) => void;\r\n}>({\r\n  user: {\r\n    id: \"\",\r\n    name: \"\",\r\n    avatar: \"\",\r\n  },\r\n  signup: () => {},\r\n});\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const ProvideAuth = (props: { children?: ReactNode }) => {\r\n  const auth = useProvideAuth();\r\n  return (\r\n    <AuthContext.Provider value={auth}>{props.children}</AuthContext.Provider>\r\n  );\r\n};\r\n\r\nconst useProvideAuth = () => {\r\n  const [user, setUser] = useState<User>({\r\n    id: \"\",\r\n    name: \"Guest\",\r\n    avatar: ``,\r\n  });\r\n\r\n  const signup = (username?: string) => {\r\n    const randomId = generateId();\r\n    const user: User = {\r\n      id: randomId,\r\n      name: username || \"Guest\",\r\n      avatar: `https://avatars.dicebear.com/api/avataaars/${\r\n        username || randomId\r\n      }.svg`,\r\n    };\r\n\r\n    localStorage.setItem(\"user\", JSON.stringify(user));\r\n\r\n    setUser(user);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const user = localStorage.getItem(\"user\");\r\n    if (user) {\r\n      const userData = JSON.parse(user);\r\n      setUser(userData);\r\n    } else {\r\n      signup();\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    user,\r\n    signup,\r\n  };\r\n};\r\n","import crypto from \"crypto\";\r\n\r\nexport const generateId = () => Math.random().toString(36).substr(2, 9);\r\n\r\nexport const encrypt = (str: string) =>\r\n  crypto.createHash(\"sha1\").update(str).digest(\"hex\");\r\n\r\nexport const groupByProperty = <T extends { [key: string]: any }>(\r\n  array: T[],\r\n  key: keyof T\r\n): T[][] => {\r\n  const elements: T[][] = [];\r\n  let li = 0;\r\n\r\n  for (let i = 0; i < array.length; i++) {\r\n    if (!i) {\r\n      elements[li] = [];\r\n    } else if (array[i - 1][key] != array[i][key]) {\r\n      li++;\r\n      elements[li] = [];\r\n    }\r\n\r\n    elements[li].push(array[i]);\r\n  }\r\n\r\n  return elements;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/checkmark.f9034358.svg\";","import styled from \"styled-components\";\r\n\r\nconst Center = styled.div`\r\n  margin: 0;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\nexport default Center;\r\n","import { Link } from \"react-router-dom\";\r\nimport { useAuth } from \"../Auth\";\r\nimport Checkmark from \"../img/checkmark.svg\";\r\nimport Center from \"../components/Center\";\r\n\r\nconst Register = () => {\r\n  let username: string;\r\n  const auth = useAuth();\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        fontSize: \"1.5em\",\r\n        display: \"flex\",\r\n      }}\r\n    >\r\n      <Center\r\n        style={{ width: \"80%\", display: \"flex\", justifyContent: \"center\" }}\r\n      >\r\n        <input\r\n          onChange={(e) => (username = e.target.value)}\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n          style={{\r\n            borderRadius: \"50px\",\r\n            fontSize: \"1em\",\r\n            padding: \"15px\",\r\n            paddingLeft: \"30px\",\r\n            outline: \"none\",\r\n            border: \"none\",\r\n          }}\r\n        />\r\n        <Link to=\"/\">\r\n          <button\r\n            onClick={() => auth.signup(username)}\r\n            style={{\r\n              marginLeft: \"25px\",\r\n              borderRadius: \"50px\",\r\n              width: \"9em\",\r\n              height: \"7em\",\r\n              border: \"none\",\r\n              backgroundColor: \"#41F900\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            <img src={Checkmark} alt=\"Checkmark\" />\r\n          </button>\r\n        </Link>\r\n      </Center>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import styled from \"styled-components\";\r\n\r\nconst Button = styled.button`\r\n  background-color: #f5f5f5;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 15px;\r\n  color: #333;\r\n  cursor: pointer;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  padding: 10px;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  outline: 0;\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  appearance: none;\r\n\r\n  &:hover {\r\n    background-color: #e5e5e5;\r\n    color: #333;\r\n  }\r\n`;\r\n\r\nexport default Button;\r\n","export default __webpack_public_path__ + \"static/media/airplane.bf7fe13f.svg\";","import { Action, Message, User } from \"../types\";\r\nimport { groupByProperty } from \"../utils\";\r\nimport airplane from \"../assets/icons/airplane.svg\";\r\n\r\nconst Messages = (props: { messages: Message[] }) => {\r\n  const { messages } = props;\r\n  const user = messages[0].author;\r\n\r\n  return (\r\n    <div className=\"grouped-chat-messages\">\r\n      <img src={user?.avatar} className=\"chat-messages-author-avatar owner\" />\r\n      <div className=\"chat-messages\">\r\n        <div className=\"grouped-chat-messages-meta\">\r\n          <p className=\"chat-messages-author-name\">{messages[0].author.name}</p>\r\n        </div>\r\n        {messages.map((message) => (\r\n          <div className=\"chat-message\">\r\n            <p className=\"chat-message-content\">{message.content}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Chat = (props: {\r\n  user: User;\r\n  sendMessage: (message: Message) => void;\r\n  messages?: Message[];\r\n}) => {\r\n  if (!props.messages) {\r\n    return <></>;\r\n  }\r\n  console.log(\"rendered\");\r\n  const groupedMessages = groupByProperty(props.messages, \"authorId\");\r\n\r\n  return (\r\n    <div className=\"chat\" style={{ width: \"22%\" }}>\r\n      <div\r\n        className=\"grouped-chat-messages-wrapper\"\r\n        style={{ overflowY: \"auto\" }}\r\n      >\r\n        {groupedMessages.map((gm) => (\r\n          <Messages messages={gm} />\r\n        ))}\r\n        <div\r\n          className=\"ps__rail-y\"\r\n          style={{\r\n            top: \"182px\",\r\n            right: \"0px\",\r\n            height: \"426px\",\r\n          }}\r\n        >\r\n          <div\r\n            className=\"ps__thumb-y\"\r\n            tabIndex={0}\r\n            style={{ top: \"128px\", height: \"298px\" }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"chat-bar-wrapper\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Say something cool...\"\r\n          className=\"chat-bar\"\r\n          onKeyDown={(e) => {\r\n            if (e.key === \"Enter\" && e.currentTarget.value) {\r\n              const content = e.currentTarget.value;\r\n              e.currentTarget.value = \"\";\r\n              props.sendMessage({\r\n                authorId: props.user.id,\r\n                author: props.user,\r\n                content,\r\n              });\r\n            }\r\n          }}\r\n        />\r\n        <div title=\"Send Message\" className=\"send-button\">\r\n          <img src={airplane} className=\"send-button-icon\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { Action, VideoData } from \"../types\";\r\n\r\nconst Video = (props: {\r\n  videoData: VideoData;\r\n  owner: boolean;\r\n  // emitVideoData: (videoData: VideoData) => void;\r\n  emitAction: (action: Action) => void;\r\n}) => {\r\n  const {\r\n    // emitVideoData,\r\n    emitAction,\r\n    owner,\r\n    videoData,\r\n  } = props;\r\n\r\n  console.log(owner);\r\n  const [ticker, setTicker] = useState<NodeJS.Timeout>();\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n\r\n  const emitVideoData = () => {\r\n    if (videoRef.current) {\r\n      const video = videoRef.current;\r\n      emitAction({\r\n        type: \"SET\",\r\n        property: \"video\",\r\n        payload: {\r\n          url: video.src,\r\n          time: owner ? video.currentTime : videoData.time,\r\n          paused: video.paused,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleTicker = () => {\r\n    if (!videoRef.current) {\r\n      return;\r\n    }\r\n\r\n    const video = videoRef.current;\r\n    const timeDiff = Math.abs(video.currentTime - videoData.time);\r\n\r\n    console.log(video.currentTime, videoData.time);\r\n\r\n    if (timeDiff > 2) {\r\n      video.currentTime = videoData.time;\r\n    }\r\n\r\n    if (videoData.paused && !video.paused) {\r\n      video.pause();\r\n    } else if (!videoData.paused && video.paused) {\r\n      video\r\n        .play()\r\n        .then(() => {})\r\n        .catch(() => {});\r\n    }\r\n\r\n    if (owner && !video.paused) {\r\n      emitVideoData();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (ticker) {\r\n      clearInterval(ticker);\r\n    }\r\n\r\n    setTicker(setInterval(handleTicker, 1000));\r\n  }, [videoData]);\r\n\r\n  return (\r\n    <video\r\n      muted\r\n      autoPlay\r\n      controls\r\n      style={{ width: \"100%\", height: \"100%\" }}\r\n      ref={videoRef}\r\n      src={videoData.url}\r\n      onPause={emitVideoData}\r\n      onPlay={emitVideoData}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Video;\r\n","import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { io, Socket } from \"socket.io-client\";\r\nimport { useAuth } from \"../Auth\";\r\nimport Avatar from \"../components/Avatar\";\r\nimport Button from \"../components/Button\";\r\nimport Center from \"../components/Center\";\r\nimport Chat from \"../components/Chat\";\r\nimport Video from \"../components/Video\";\r\nimport { Action, RoomResponse, RoomState, VideoData } from \"../types\";\r\n\r\nconst reducer = (state: RoomState, action: Action) => {\r\n  switch (action.type) {\r\n    case \"ADD\":\r\n      return {\r\n        ...state,\r\n        [action.property]: [...state[action.property], action.payload],\r\n      };\r\n    case \"REMOVE\":\r\n      return {\r\n        ...state,\r\n        [action.property]: state[action.property].filter(\r\n          (item: any) => item.id !== action.payload.id\r\n        ),\r\n      };\r\n    case \"SET\":\r\n      return {\r\n        ...state,\r\n        [action.property]: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst LoadRoom = (props: {\r\n  match: {\r\n    params: {\r\n      roomId: string;\r\n    };\r\n  };\r\n}) => {\r\n  const [room, setRoom] = useState<RoomState>();\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get<RoomResponse>(`/room/${props.match.params.roomId}`)\r\n      .then((resp) =>\r\n        setRoom({ success: resp.data.success, ...resp.data.room })\r\n      )\r\n      .catch((err) =>\r\n        setRoom(\r\n          err.response\r\n            ? err.response.data\r\n            : {\r\n                id: \"\",\r\n                error: err.message,\r\n                success: false,\r\n                users: [],\r\n                messages: [],\r\n              }\r\n        )\r\n      );\r\n  }, [props.match.params.roomId]);\r\n\r\n  if (!room) {\r\n    return <Center style={{ fontSize: \"3rem\" }}>Loading...</Center>;\r\n  }\r\n\r\n  if (room.error) {\r\n    return (\r\n      <Center style={{ fontSize: \"3rem\" }}>\r\n        {room.error}\r\n        <br />\r\n        <Link to=\"/\">\r\n          <Button>Go back to the home page</Button>\r\n        </Link>\r\n      </Center>\r\n    );\r\n  }\r\n\r\n  return <Room room={room} />;\r\n};\r\n\r\nconst Room = (props: { room: RoomState }) => {\r\n  const { room } = props;\r\n  const auth = useAuth();\r\n  const [socket, setSocket] = useState<Socket | null>(null);\r\n  const [state, dispatch] = React.useReducer(reducer, props.room);\r\n\r\n  const emitAction = (action: Action) => socket?.emit(\"action\", action);\r\n\r\n  useEffect(() => {\r\n    if (socket) {\r\n      return;\r\n    }\r\n\r\n    const _socket = io(\r\n      process.env.REACT_APP_API_URL || \"http://localhost:5000\",\r\n      {\r\n        query: { roomId: room.id },\r\n      }\r\n    );\r\n    setSocket(_socket);\r\n\r\n    _socket.on(\"connect\", () => {\r\n      _socket.emit(\"join\", { roomId: room.id, user: auth.user });\r\n      _socket.on(\"action\", (action: Action) => dispatch(action));\r\n    });\r\n  }, [auth.user, room.id, socket]);\r\n\r\n  if (!socket) {\r\n    return <Center>Loading...</Center>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"header\">\r\n        <div className=\"left\">\r\n          <Link\r\n            to=\"/\"\r\n            className=\"is-wrapper nuxt-link-exact-active nuxt-link-active\"\r\n          >\r\n            <div className=\"logo-small logo-mask\"></div>\r\n          </Link>\r\n          <h1\r\n            className=\"header-title\"\r\n            onClick={() => navigator.clipboard?.writeText(room.id)}\r\n            style={{ cursor: \"pointer\" }}\r\n          >\r\n            {state.id}\r\n          </h1>\r\n        </div>\r\n        <div className=\"right\">\r\n          {state.users.map((u) => (\r\n            <img src={u.avatar} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div className=\"content is-center\">\r\n        <div className=\"room-wrapper\">\r\n          <div className=\"room\">\r\n            <div className=\"player-wrapper\" style={{ width: \"78%\", bottom: 0 }}>\r\n              <Video\r\n                videoData={{\r\n                  ...state.video,\r\n                  // url: state.video.url,\r\n                  url: \"https://api.imovies.cc/api/v1/movies/44822/files/1318315\",\r\n                }}\r\n                owner={state.ownerId === auth.user.id}\r\n                emitAction={emitAction}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Chat\r\n          user={auth.user}\r\n          messages={state.messages}\r\n          sendMessage={(msg) =>\r\n            emitAction({\r\n              type: \"ADD\",\r\n              property: \"messages\",\r\n              payload: msg,\r\n            })\r\n          }\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadRoom;\r\n","const Box = (props: {\r\n  header: string;\r\n  description: string;\r\n  icon?: string;\r\n  onClick?: () => void;\r\n}) => (\r\n  <div className=\"box option is-hoverable\" onClick={props.onClick}>\r\n    {props.icon ? <img className=\"icon\" src={props.icon} /> : null}\r\n    <h3 className=\"header\">{props.header}</h3>\r\n    <p className=\"description\">{props.description}</p>\r\n  </div>\r\n);\r\n\r\nexport default Box;\r\n","export default __webpack_public_path__ + \"static/media/panel-arrow-right.488b9fc6.svg\";","export default __webpack_public_path__ + \"static/media/add.0f7bde88.svg\";","import Box from \"../components/Box\";\r\nimport \"../styles/borealis.min.css\";\r\nimport panelArrowRight from \"../assets/icons/panel-arrow-right.svg\";\r\nimport add from \"../assets/icons/add.svg\";\r\nimport axios from \"axios\";\r\nimport { RoomData } from \"../types\";\r\nimport { useHistory } from \"react-router\";\r\nimport { useAuth } from \"../Auth\";\r\n\r\nconst _Home = () => {\r\n  const history = useHistory();\r\n  const auth = useAuth();\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"content is-center\">\r\n        <div className=\"home\">\r\n          <h1 className=\"title\">Welcome Home</h1>\r\n          <p className=\"subtitle\">\r\n            It's never been easier to join or start a room with your friends.\r\n            <br />\r\n            Select an option below to get started:\r\n          </p>\r\n          <div className=\"options\">\r\n            <Box\r\n              icon={panelArrowRight}\r\n              header={\"Join a Room\"}\r\n              description={\r\n                \"Received an invite link or an invite code for a room? Enter it here!\"\r\n              }\r\n            />\r\n            <Box\r\n              icon={add}\r\n              header=\"Create a Room\"\r\n              description={\r\n                \"Need a room where you can watch anything with your friends? This is the place to go\"\r\n              }\r\n              onClick={() => {\r\n                axios\r\n                  .post<RoomData>(\"/room\", {\r\n                    ownerId: auth.user.id,\r\n                  })\r\n                  .then((res) => history.push(`/room/${res.data.id}`));\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default _Home;\r\n","import Chat from \"../components/Chat\";\r\nimport { Message } from \"../types\";\r\nimport { groupByProperty } from \"../utils\";\r\n\r\nconst _Room = () => {\r\n\r\n  return (\r\n    <div className=\"root\">\r\n      <div className=\"header\">\r\n        <div className=\"left\">\r\n          <a\r\n            href=\"/room\"\r\n            aria-current=\"page\"\r\n            className=\"is-wrapper nuxt-link-exact-active nuxt-link-active\"\r\n          >\r\n            <div className=\"logo-small logo-mask\"></div>\r\n          </a>\r\n          <h1 className=\"header-title\">{/* {room title} */}</h1>\r\n        </div>\r\n        <div className=\"right\">{/* put avatar here */}</div>\r\n      </div>\r\n      <div className=\"content is-center\">\r\n        <div className=\"room-wrapper\">\r\n          <div className=\"room\">\r\n            <video\r\n              src=\"/assets/7bff043b.mp4\"\r\n              preload=\"\"\r\n              className=\"is-placeholder\"\r\n            ></video>\r\n          </div>\r\n        </div>\r\n        {/* <Chat messages={messages} /> */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default _Room;\r\n","import { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { ProvideAuth } from \"./Auth\";\r\nimport Register from \"./pages/Register\";\r\nimport Room from \"./pages/Room\";\r\nimport _Home from \"./pages/_Home\";\r\nimport _Room from \"./pages/_Room\";\r\n\r\nconst App = () => (\r\n  <div className=\"App\">\r\n    <ProvideAuth>\r\n      <Router>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={_Home} />\r\n          <Route exact path=\"/register\" component={Register} />\r\n          <Route path=\"/room/:roomId\" component={Room} />\r\n          <Route path=\"/_room\" component={_Room} />\r\n          <Route path=\"/_home\" component={_Home} />\r\n        </Switch>\r\n      </Router>\r\n    </ProvideAuth>\r\n  </div>\r\n);\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\nimport axios from \"axios\";\r\nimport { config as loadEnv } from \"dotenv\";\r\nimport { HashRouter } from \"react-router-dom\";\r\n\r\nloadEnv();\r\n\r\naxios.defaults.baseURL =\r\n  process.env.REACT_APP_API_URL || \"http://localhost:5000\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter basename=\"/\">\r\n      <App />\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}