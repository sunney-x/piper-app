{"version":3,"sources":["Auth.tsx","utils.ts","img/checkmark.svg","components/Center.tsx","pages/Register.tsx","components/Button.tsx","assets/icons/airplane.svg","components/Chat.tsx","components/Video.tsx","pages/Room.tsx","components/Box.tsx","assets/icons/panel-arrow-right.svg","assets/icons/add.svg","pages/Home.tsx","App.tsx","index.tsx"],"names":["AuthContext","createContext","user","id","name","avatar","signup","useAuth","useContext","ProvideAuth","props","auth","useProvideAuth","Provider","value","children","useState","setUser","username","randomId","Math","random","toString","substr","localStorage","setItem","JSON","stringify","useEffect","getItem","userData","parse","Center","styled","div","Register","style","fontSize","display","width","justifyContent","onChange","e","target","type","placeholder","borderRadius","padding","paddingLeft","outline","border","to","onClick","marginLeft","height","backgroundColor","cursor","src","Checkmark","alt","Button","button","Messages","messages","author","className","map","message","content","Chat","ref","useRef","current","scrollTop","scrollHeight","groupedMessages","array","key","elements","li","i","length","push","groupByProperty","overflowY","gm","top","right","tabIndex","onKeyDown","currentTarget","sendMessage","authorId","title","airplane","Video","emitAction","owner","videoData","console","log","ticker","setTicker","videoRef","emitVideoData","video","property","payload","url","time","currentTime","paused","handleTicker","timeDiff","abs","pause","play","then","catch","clearInterval","setInterval","muted","autoPlay","controls","onPause","onPlay","reducer","state","action","filter","item","Room","room","socket","setSocket","React","useReducer","dispatch","emit","_socket","io","process","query","roomId","on","navigator","clipboard","writeText","users","u","bottom","ownerId","msg","LoadRoom","setRoom","axios","get","match","params","resp","success","data","err","response","error","Box","icon","header","description","_Home","history","useHistory","panelArrowRight","add","post","res","App","exact","path","component","Home","loadEnv","defaults","baseURL","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3bc085ae.chunk.js","sourcesContent":["import {\r\n  useState,\r\n  useEffect,\r\n  useContext,\r\n  createContext,\r\n  ReactNode,\r\n} from \"react\";\r\nimport { User } from \"./types\";\r\nimport { generateId } from \"./utils\";\r\n\r\nconst AuthContext = createContext<{\r\n  user: User;\r\n  signup: (username?: string) => void;\r\n}>({\r\n  user: {\r\n    id: \"\",\r\n    name: \"\",\r\n    avatar: \"\",\r\n  },\r\n  signup: () => {},\r\n});\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const ProvideAuth = (props: { children?: ReactNode }) => {\r\n  const auth = useProvideAuth();\r\n  return (\r\n    <AuthContext.Provider value={auth}>{props.children}</AuthContext.Provider>\r\n  );\r\n};\r\n\r\nconst useProvideAuth = () => {\r\n  const [user, setUser] = useState<User>({\r\n    id: \"\",\r\n    name: \"Guest\",\r\n    avatar: ``,\r\n  });\r\n\r\n  const signup = (username?: string) => {\r\n    const randomId = generateId();\r\n    const user: User = {\r\n      id: randomId,\r\n      name: username || \"Guest\",\r\n      avatar: `https://avatars.dicebear.com/api/avataaars/${\r\n        username || randomId\r\n      }.svg`,\r\n    };\r\n\r\n    localStorage.setItem(\"user\", JSON.stringify(user));\r\n\r\n    setUser(user);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const user = localStorage.getItem(\"user\");\r\n    if (user) {\r\n      const userData = JSON.parse(user);\r\n      setUser(userData);\r\n    } else {\r\n      signup();\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    user,\r\n    signup,\r\n  };\r\n};\r\n","import crypto from \"crypto\";\r\n\r\nexport const generateId = () => Math.random().toString(36).substr(2, 9);\r\n\r\nexport const encrypt = (str: string) =>\r\n  crypto.createHash(\"sha1\").update(str).digest(\"hex\");\r\n\r\nexport const groupByProperty = <T extends { [key: string]: any }>(\r\n  array: T[],\r\n  key: keyof T\r\n): T[][] => {\r\n  const elements: T[][] = [];\r\n  let li = 0;\r\n\r\n  for (let i = 0; i < array.length; i++) {\r\n    if (!i) {\r\n      elements[li] = [];\r\n    } else if (array[i - 1][key] !== array[i][key]) {\r\n      li++;\r\n      elements[li] = [];\r\n    }\r\n\r\n    elements[li].push(array[i]);\r\n  }\r\n\r\n  return elements;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/checkmark.f9034358.svg\";","import styled from \"styled-components\";\r\n\r\nconst Center = styled.div`\r\n  margin: 0;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\nexport default Center;\r\n","import { Link } from \"react-router-dom\";\r\nimport { useAuth } from \"../Auth\";\r\nimport Checkmark from \"../img/checkmark.svg\";\r\nimport Center from \"../components/Center\";\r\n\r\nconst Register = () => {\r\n  let username: string;\r\n  const auth = useAuth();\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        fontSize: \"1.5em\",\r\n        display: \"flex\",\r\n      }}\r\n    >\r\n      <Center\r\n        style={{ width: \"80%\", display: \"flex\", justifyContent: \"center\" }}\r\n      >\r\n        <input\r\n          onChange={(e) => (username = e.target.value)}\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n          style={{\r\n            borderRadius: \"50px\",\r\n            fontSize: \"1em\",\r\n            padding: \"15px\",\r\n            paddingLeft: \"30px\",\r\n            outline: \"none\",\r\n            border: \"none\",\r\n          }}\r\n        />\r\n        <Link to=\"/\">\r\n          <button\r\n            onClick={() => auth.signup(username)}\r\n            style={{\r\n              marginLeft: \"25px\",\r\n              borderRadius: \"50px\",\r\n              width: \"9em\",\r\n              height: \"7em\",\r\n              border: \"none\",\r\n              backgroundColor: \"#41F900\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            <img src={Checkmark} alt=\"Checkmark\" />\r\n          </button>\r\n        </Link>\r\n      </Center>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import styled from \"styled-components\";\r\n\r\nconst Button = styled.button`\r\n  background-color: #f5f5f5;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 15px;\r\n  color: #333;\r\n  cursor: pointer;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  padding: 10px;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  outline: 0;\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  appearance: none;\r\n\r\n  &:hover {\r\n    background-color: #e5e5e5;\r\n    color: #333;\r\n  }\r\n`;\r\n\r\nexport default Button;\r\n","export default __webpack_public_path__ + \"static/media/airplane.bf7fe13f.svg\";","import { Message, User } from \"../types\";\r\nimport { groupByProperty } from \"../utils\";\r\nimport airplane from \"../assets/icons/airplane.svg\";\r\nimport { useEffect, useRef } from \"react\";\r\n\r\nconst Messages = (props: { messages: Message[] }) => {\r\n  const { messages } = props;\r\n  const user = messages[0].author;\r\n\r\n  return (\r\n    <div className=\"grouped-chat-messages\">\r\n      <img\r\n        src={user?.avatar}\r\n        className=\"chat-messages-author-avatar owner\"\r\n        alt={`Avatar of ${user.name}`}\r\n      />\r\n      <div className=\"chat-messages\">\r\n        <div className=\"grouped-chat-messages-meta\">\r\n          <p className=\"chat-messages-author-name\">{messages[0].author.name}</p>\r\n        </div>\r\n        {messages.map((message) => (\r\n          <div className=\"chat-message\">\r\n            <p className=\"chat-message-content\">{message.content}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Chat = (props: {\r\n  user: User;\r\n  sendMessage: (message: Message) => void;\r\n  messages?: Message[];\r\n}) => {\r\n  const ref = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (ref.current) {\r\n      ref.current.scrollTop = ref.current.scrollHeight;\r\n    }\r\n  });\r\n\r\n  if (!props.messages) {\r\n    return <></>;\r\n  }\r\n\r\n  const groupedMessages = groupByProperty(props.messages, \"authorId\");\r\n\r\n  return (\r\n    <div className=\"chat\" style={{ width: \"22%\" }}>\r\n      <div\r\n        className=\"grouped-chat-messages-wrapper\"\r\n        style={{ overflowY: \"auto\" }}\r\n        ref={ref}\r\n      >\r\n        {groupedMessages.map((gm) => (\r\n          <Messages messages={gm} />\r\n        ))}\r\n        <div\r\n          className=\"ps__rail-y\"\r\n          style={{\r\n            top: \"182px\",\r\n            right: \"0px\",\r\n            height: \"426px\",\r\n          }}\r\n        >\r\n          <div\r\n            className=\"ps__thumb-y\"\r\n            tabIndex={0}\r\n            style={{ top: \"128px\", height: \"298px\" }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"chat-bar-wrapper\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Say something cool...\"\r\n          className=\"chat-bar\"\r\n          onKeyDown={(e) => {\r\n            if (e.key === \"Enter\" && e.currentTarget.value) {\r\n              const content = e.currentTarget.value;\r\n              e.currentTarget.value = \"\";\r\n              props.sendMessage({\r\n                authorId: props.user.id,\r\n                author: props.user,\r\n                content,\r\n              });\r\n            }\r\n          }}\r\n        />\r\n        <div title=\"Send Message\" className=\"send-button\">\r\n          <img\r\n            src={airplane}\r\n            className=\"send-button-icon\"\r\n            alt={\"Send Message\"}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { Action, VideoData } from \"../types\";\r\n\r\nconst Video = (props: {\r\n  videoData: VideoData;\r\n  owner: boolean;\r\n  // emitVideoData: (videoData: VideoData) => void;\r\n  emitAction: (action: Action) => void;\r\n}) => {\r\n  const {\r\n    emitAction,\r\n    owner,\r\n    videoData,\r\n  } = props;\r\n\r\n  console.log(owner);\r\n  const [ticker, setTicker] = useState<NodeJS.Timeout>();\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n\r\n  const emitVideoData = () => {\r\n    if (videoRef.current) {\r\n      const video = videoRef.current;\r\n      emitAction({\r\n        type: \"SET\",\r\n        property: \"video\",\r\n        payload: {\r\n          url: video.src,\r\n          time: owner ? video.currentTime : videoData.time,\r\n          paused: video.paused,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleTicker = () => {\r\n    if (!videoRef.current) {\r\n      return;\r\n    }\r\n\r\n    const video = videoRef.current;\r\n    const timeDiff = Math.abs(video.currentTime - videoData.time);\r\n\r\n    console.log(video.currentTime, videoData.time);\r\n\r\n    if (timeDiff > 2) {\r\n      video.currentTime = videoData.time;\r\n    }\r\n\r\n    if (videoData.paused && !video.paused) {\r\n      video.pause();\r\n    } else if (!videoData.paused && video.paused) {\r\n      video\r\n        .play()\r\n        .then(() => {})\r\n        .catch(() => {});\r\n    }\r\n\r\n    if (owner && !video.paused) {\r\n      emitVideoData();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (ticker) {\r\n      clearInterval(ticker);\r\n    }\r\n\r\n    setTicker(setInterval(handleTicker, 1000));\r\n  }, [videoData]);\r\n\r\n  return (\r\n    <video\r\n      muted\r\n      autoPlay\r\n      controls\r\n      style={{ width: \"100%\", height: \"100%\" }}\r\n      ref={videoRef}\r\n      src={videoData.url}\r\n      onPause={emitVideoData}\r\n      onPlay={emitVideoData}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Video;\r\n","import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { io, Socket } from \"socket.io-client\";\r\nimport { useAuth } from \"../Auth\";\r\nimport Button from \"../components/Button\";\r\nimport Center from \"../components/Center\";\r\nimport Chat from \"../components/Chat\";\r\nimport Video from \"../components/Video\";\r\nimport { Action, RoomResponse, RoomState } from \"../types\";\r\n\r\nconst reducer = (state: RoomState, action: Action) => {\r\n  switch (action.type) {\r\n    case \"ADD\":\r\n      return {\r\n        ...state,\r\n        [action.property]: [...state[action.property], action.payload],\r\n      };\r\n    case \"REMOVE\":\r\n      return {\r\n        ...state,\r\n        [action.property]: state[action.property].filter(\r\n          (item: any) => item.id !== action.payload.id\r\n        ),\r\n      };\r\n    case \"SET\":\r\n      return {\r\n        ...state,\r\n        [action.property]: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst LoadRoom = (props: {\r\n  match: {\r\n    params: {\r\n      roomId: string;\r\n    };\r\n  };\r\n}) => {\r\n  const [room, setRoom] = useState<RoomState>();\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get<RoomResponse>(`/room/${props.match.params.roomId}`)\r\n      .then((resp) =>\r\n        setRoom({ success: resp.data.success, ...resp.data.room })\r\n      )\r\n      .catch((err) =>\r\n        setRoom(\r\n          err.response\r\n            ? err.response.data\r\n            : {\r\n                id: \"\",\r\n                error: err.message,\r\n                success: false,\r\n                users: [],\r\n                messages: [],\r\n              }\r\n        )\r\n      );\r\n  }, [props.match.params.roomId]);\r\n\r\n  if (!room) {\r\n    return <Center style={{ fontSize: \"3rem\" }}>Loading...</Center>;\r\n  }\r\n\r\n  if (room.error) {\r\n    return (\r\n      <Center style={{ fontSize: \"3rem\" }}>\r\n        {room.error}\r\n        <br />\r\n        <Link to=\"/\">\r\n          <Button>Go back to the home page</Button>\r\n        </Link>\r\n      </Center>\r\n    );\r\n  }\r\n\r\n  return <Room room={room} />;\r\n};\r\n\r\nconst Room = (props: { room: RoomState }) => {\r\n  const { room } = props;\r\n  const auth = useAuth();\r\n  const [socket, setSocket] = useState<Socket | null>(null);\r\n  const [state, dispatch] = React.useReducer(reducer, props.room);\r\n\r\n  const emitAction = (action: Action) => {\r\n    socket?.emit(\"action\", action)\r\n    dispatch(action);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (socket) {\r\n      return;\r\n    }\r\n\r\n    const _socket = io(\r\n      process.env.REACT_APP_API_URL || \"http://localhost:5000\",\r\n      {\r\n        query: { roomId: room.id },\r\n      }\r\n    );\r\n    setSocket(_socket);\r\n\r\n    _socket.on(\"connect\", () => {\r\n      _socket.emit(\"join\", { roomId: room.id, user: auth.user });\r\n      _socket.on(\"action\", (action: Action) => dispatch(action));\r\n    });\r\n  }, [auth.user, room.id, socket]);\r\n\r\n  if (!socket) {\r\n    return <Center>Loading...</Center>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"header\">\r\n        <div className=\"left\">\r\n          <Link\r\n            to=\"/\"\r\n            className=\"is-wrapper nuxt-link-exact-active nuxt-link-active\"\r\n          >\r\n            <div className=\"logo-small logo-mask\"></div>\r\n          </Link>\r\n          <h1\r\n            className=\"header-title\"\r\n            onClick={() => navigator.clipboard?.writeText(room.id)}\r\n            style={{ cursor: \"pointer\" }}\r\n          >\r\n            {state.id}\r\n          </h1>\r\n        </div>\r\n        <div className=\"right\">\r\n          {state.users.map((u) => (\r\n            <img src={u.avatar} alt={`Avatar of ${u.name}`} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div className=\"content is-center\">\r\n        <div className=\"room-wrapper\">\r\n          <div className=\"room\">\r\n            <div className=\"player-wrapper\" style={{ width: \"78%\", bottom: 0 }}>\r\n              <Video\r\n                videoData={{\r\n                  ...state.video,\r\n                  // url: state.video.url,\r\n                  url: \"https://s4106-04.imovies.cc/video/imovie_hash_code/9/2020071010112589_high_ENG.mp4?md5=RyYOPQO_Q06TZ0vQZU_GDw&expires=1632386970&data=YTozOntzOjc6InVzZXJfaXAiO3M6MTU6IjEwOS4xNzIuMjMyLjE1MSI7czoxMDoidXNlcl9hZ2VudCI7czoxMTQ6Ik1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85My4wLjQ1NzcuODIgU2FmYXJpLzUzNy4zNiI7czo3OiJyZWZlcmVyIjtzOjIzOiJodHRwczovL3d3dy5pbW92aWVzLmNjLyI7fQ==\",\r\n                }}\r\n                owner={state.ownerId === auth.user.id}\r\n                emitAction={emitAction}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Chat\r\n          user={auth.user}\r\n          messages={state.messages}\r\n          sendMessage={(msg) =>\r\n            emitAction({\r\n              type: \"ADD\",\r\n              property: \"messages\",\r\n              payload: msg,\r\n            })\r\n          }\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadRoom;\r\n","const Box = (props: {\r\n  header: string;\r\n  description: string;\r\n  icon?: string;\r\n  onClick?: () => void;\r\n}) => (\r\n  <div className=\"box option is-hoverable\" onClick={props.onClick}>\r\n    {props.icon ? <img className=\"icon\" src={props.icon} alt={\"Icon\"} /> : null}\r\n    <h3 className=\"header\">{props.header}</h3>\r\n    <p className=\"description\">{props.description}</p>\r\n  </div>\r\n);\r\n\r\nexport default Box;\r\n","export default __webpack_public_path__ + \"static/media/panel-arrow-right.488b9fc6.svg\";","export default __webpack_public_path__ + \"static/media/add.0f7bde88.svg\";","import Box from \"../components/Box\";\r\nimport \"../styles/borealis.min.css\";\r\nimport panelArrowRight from \"../assets/icons/panel-arrow-right.svg\";\r\nimport add from \"../assets/icons/add.svg\";\r\nimport axios from \"axios\";\r\nimport { RoomData } from \"../types\";\r\nimport { useHistory } from \"react-router\";\r\nimport { useAuth } from \"../Auth\";\r\n\r\nconst _Home = () => {\r\n  const history = useHistory();\r\n  const auth = useAuth();\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"content is-center\">\r\n        <div className=\"home\">\r\n          <h1 className=\"title\">Welcome Home</h1>\r\n          <p className=\"subtitle\">\r\n            It's never been easier to join or start a room with your friends.\r\n            <br />\r\n            Select an option below to get started:\r\n          </p>\r\n          <div className=\"options\">\r\n            <Box\r\n              icon={panelArrowRight}\r\n              header={\"Join a Room\"}\r\n              description={\r\n                \"Received an invite link or an invite code for a room? Enter it here!\"\r\n              }\r\n            />\r\n            <Box\r\n              icon={add}\r\n              header=\"Create a Room\"\r\n              description={\r\n                \"Need a room where you can watch anything with your friends? This is the place to go\"\r\n              }\r\n              onClick={() => {\r\n                axios\r\n                  .post<RoomData>(\"/room\", {\r\n                    ownerId: auth.user.id,\r\n                  })\r\n                  .then((res) => history.push(`/room/${res.data.id}`));\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default _Home;\r\n","import { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { ProvideAuth } from \"./Auth\";\r\nimport Register from \"./pages/Register\";\r\nimport Room from \"./pages/Room\";\r\nimport Home from \"./pages/Home\";\r\n\r\nconst App = () => (\r\n  <div className=\"App\">\r\n    <ProvideAuth>\r\n      <Router>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Home} />\r\n          <Route exact path=\"/register\" component={Register} />\r\n          <Route path=\"/room/:roomId\" component={Room} />\r\n        </Switch>\r\n      </Router>\r\n    </ProvideAuth>\r\n  </div>\r\n);\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\nimport axios from \"axios\";\r\nimport { config as loadEnv } from \"dotenv\";\r\n\r\nloadEnv();\r\n\r\naxios.defaults.baseURL =\r\n  process.env.REACT_APP_API_URL || \"http://localhost:5000\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}